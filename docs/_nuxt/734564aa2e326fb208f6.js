(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{293:function(e,t,r){"use strict";r.r(t);r(12);var n=r(2),o=r(19),d=r.n(o),m=r(5),h=r(83),l={middleware:"auth",components:{bandform:r(236).a,message:h.a},head:function(){return{title:"Taldea aldatu - "+m.a.title}},asyncData:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params,e.prev=1,e.next=4,d.a.get(m.a.apiURL+"/user-info");case 4:return n=e.sent,e.next=7,d.a.get(m.a.apiURL+"/get-band-id/"+r.id);case 7:return o=e.sent,e.abrupt("return",{myUser:n.data.user,band:o.data.band});case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),data:function(){return{loaderStatus:!1,messages:{group:"update",type:null,errors:[]}}},methods:{_updateForm:function(e){var t=this,form=document.getElementById("form"),r=new FormData(form);r.append("id",this.$route.params.id),null===e[0]&&"undefined"===e[0]||r.append("user",e[0]),this.band.country&&r.append("country",this.band.country.value),this.messages.errors=[],null!=e[0]&&"undefined"!=e[0]||this.messages.errors.push("Erabiltzaile bat aukeratu behar duzu."),this.band.picture||(e[1]||this.messages.errors.push("Irudia igotzea beharrezkoa da."),e[1]&&e[1].size>1e6&&this.messages.errors.push("Irudiaren tamaina handiegia da.")),e[2]<400&&this.messages.errors.push("Irudiaren zabalera txikiegia da."),this.band.music||this.messages.errors.push("Musika estiloa."),this.band.country&&null!=this.band.country||this.messages.errors.push("Taldearen herrialdea."),this.band.town||this.messages.errors.push("Taldearen herria."),this.band.members||this.messages.errors.push("Taldekide kopurua."),this.band.women||this.messages.errors.push("Emakume kopurua."),this.band.members&&this.band.women&&this.band.women>this.band.members&&this.messages.errors.push("Emakume kopurua ezin da taldekide kopurua baino handiago izan."),this.messages.errors.length?this._message("warn"):(this.loaderStatus=!0,d.a.put(m.a.apiURL+"/update",r).then(function(e){t.loaderStatus=!1,t._message("success")}).catch(function(e){t.loaderStatus=!1}))},_message:function(e){var t=this;this.messages.type=e,setTimeout(function(){t.$notify({group:t.messages.group,type:e,duration:5e3})},100)}}},c=r(3),component=Object(c.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[r("h2",[e._v("Taldea aldatu")]),e._v(" "),r("message",{attrs:{group:e.messages.group,type:e.messages.type,errors:e.messages.errors,title:"Gordeta!",message:"Taldearen datuak ondo gorde dira."}}),e._v(" "),r("bandform",{attrs:{loaderStatus:e.loaderStatus,band:e.band,currentUser:e.myUser,mode:"update"},on:{clicked:e._updateForm}})],1)},[],!1,null,null,null);t.default=component.exports}}]);